<!-- table.html -->
{% extends 'frontend/base.html' %}

{% load django_bootstrap5 %}
{% load django_fast_frontend %}

{% block title %}{{ meta.title }}{% endblock %}

{% block content %}
    {% with request.path|split:"/" as segments %}
        <div class="col d-flex justify-content-between">
            {% if option.site.title %}
                <h1>{{ meta.title }}</h1>
            {% endif %}
            {% if segments.3 %}
                <a href="{% url 'frontend' app_name=segments.1 model_name=segments.2 %}">{% bootstrap_button button_class="btn-outline-primary" button_type="button" content="Back" %}</a>
            {% endif %}
        </div>
        {% if segments.3 %}
            {% if option.table.add %}
                {% include 'frontend/_form.html' %}
            {% endif %}
        {% else %}
            <div class="col d-flex mb-4">
                {{ site.description }}
            </div>
            {% if option.table.toolbar_button %}
                <!-- Toolbar -->
                <div class="d-flex mb-3">
                    {% if option.table.add %}
                        <td>
                            <a href="{% url 'frontend' app_name=segments.1 model_name=segments.2 action="table_add"%}">{% bootstrap_button button_class="btn btn-secondary me-2" button_type="button" content="<i class='bi bi-plus-square'></i> Add" %}</a>
                        </td>
                    {% endif %}
                    {% for toolbar_button in table.toolbar_button %}
                        <form method="post" class="needs-validation" novalidate action="{% url 'frontend' app_name=segments.1 model_name=segments.2 action=toolbar_button %}">
                            {% csrf_token %}
                            {% with toolbar_button|label as toolbar_button_label %}
                                {% bootstrap_button button_class="btn btn-primary me-2" button_type="submit" content=toolbar_button_label %}
                            {% endwith %}
                        </form>
                    {% endfor %}
                </div>

            {% endif %}
            {% if option.table.show %}
                {% if option.table.search %}
                    {% include 'frontend/_search.html' %}
                {% endif %}
                {% if option.table.cards %}
                    {% include 'frontend/_cards.html' %}
                {% else %}
                    {% include 'frontend/_table.html' %}
                {% endif %}
                {% include 'frontend/_pagination.html' %}
            {% endif %}
        {% endif %}
    {% endwith %}
{% endblock %}
